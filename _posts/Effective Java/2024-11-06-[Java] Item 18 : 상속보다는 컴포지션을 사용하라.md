---
title: "[Java] Item 18 : ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼"
categories:
  - Effective Java
tags:
toc: true
toc_sticky: true
date: 2024-11-06 08:20:00 +0900
---

<strong>Effective Javaë¥¼ ì½ê³  ì •ë¦¬í•œ ì •ë¦¬ë³¸ì…ë‹ˆë‹¤.</strong>
{: .notice}

# ğŸ“Œ Item 18 : ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼

## ğŸ«§ ìƒì†ì˜ ë‹¨ì 
1. ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦¼
- ìƒìœ„ í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë™ì‘ì— ì´ìƒì´ ìƒê¸¸ ìˆ˜ ìˆìŒ.

### âœ¨ ì½”ë“œ ì˜ˆì‹œ
- ì²˜ìŒ ìƒì„±ëœ ì´í›„ ì›ì†Œê°€ ëª‡ ê°œ ë”í•´ì¡ŒëŠ”ì§€ ì•Œ ìˆ˜ ìˆëŠ” ë³€í˜• HashSet

```java
public class InstrumentedHashSet<E> extends HashSet<E> {
  private int addCount = 0; // ì¶”ê°€ëœ ì›ì†Œì˜ ìˆ˜

  public InstrumentedHashSet(int initCap, float loadFactor) {
    super(initCap, loadFactor);
  }

  @Override public boolean add (E e) {
    addCount ++;
    return super.add(e);
  }

  @Override public boolean addAll(Collection<? extends E> c) {
    addCount += c.size();
    return super.addAll(c);
  }

  public int getAddCount() {
    return addCount;
  }
}
```

&ensp; ë§Œì•½ ì´ ì½”ë“œì— addAllë¡œ ì›ì†Œ 3ê°œë¥¼ ë”í–ˆë‹¤ë©´? getAddCountì—ì„œëŠ” 3ì´ ì•„ë‹Œ 6ì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤. HashSetì˜ addAll ë©”ì„œë“œê°€ add ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•´ì„œ í•œ ì›ì†Œì— ëŒ€í•´ ë‘ ë²ˆ ì¹´ìš´íŠ¸ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

&ensp; ê·¸ë ‡ë‹¤ë©´ addAll ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¬ì •ì˜í•˜ë©´ ì–´ë–¨ê¹Œ? ì£¼ì–´ì§„ ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•˜ë©° ì›ì†Œ í•˜ë‚˜ë‹¹ add ë©”ì„œë“œë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤.

&ensp; ë§Œì•½ ì´ë ‡ê²Œ ë¬¸ì œë¥¼ íšŒí”¼í•˜ë ¤ í•œë‹¤ë©´, ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ë™ì‘ì„ ë‹¤ì‹œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì–´ë ¤ìš¸ ë¿ë”ëŸ¬, í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” private í•„ë“œë¥¼ ì¨ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´ êµ¬í˜„ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•´ì§ˆ ê²ƒì´ë‹¤.

## ğŸ«§ ì»´í¬ì§€ì…˜

- ìƒì†ì˜ ë‹¨ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©
ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ëŒ€ì‹ , ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•¨.

`ì „ë‹¬` : ìƒˆ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë“¤ì€ private í•„ë“œë¡œ ì°¸ì¡°í•˜ëŠ” ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ë‹¤ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒ. ì—¬ê¸°ì„œ ìƒˆ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë“¤ì€ `ì „ë‹¬ ë©”ì„œë“œ` ë¼ê³  ë¶€ë¥¸ë‹¤.

## ğŸ«§ ë˜í¼ í´ë˜ìŠ¤ - ìƒì† ëŒ€ì‹  ì»´í¬ì§€ì…˜ ì‚¬ìš©

```java
public class InstrumentedSet<E> extends ForwardingSet<E> {
  private int addCount = 0;

  public InstrumentedSet(Set<E> s) {
    super(s);
  }

  @Override public boolean add (E e) {
    addCount++;
    return super.add(e);
  }

  @Override public boolean addAll(Collection<? extends E> c) {
    addCount += c.size();
    return super.addAll(c);
  }

  public int getAddCount() {
    return addCount;
  }
}
```

## ğŸ«§ ì „ë‹¬ í´ë˜ìŠ¤ ì½”ë“œ (ì¬ì‚¬ìš© ê°€ëŠ¥)
```java
public class ForwardingSet<E> implements Set<E> {
  private final Set<E> s;
  public ForwardingSet(Set<E> s) { this.s = s };

  public void clear() { s.clear(); }
  public boolean contains(Object o) { return s. contains(o); }
  public boolean isEmpty() { return s.isEmpty(); }
  ...
}
```

InstrumentedSetì€ HashSetì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì •ì˜í•œ Set ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í–ˆë‹¤.