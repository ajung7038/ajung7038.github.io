---
title: "[Java] Item 20 : μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ"
categories:
  - Effective Java
tags:
toc: true
toc_sticky: true
date: 2024-11-20 10:28:00 +0900
---

<strong>Effective Javaλ¥Ό μ½κ³  μ •λ¦¬ν• μ •λ¦¬λ³Έμ…λ‹λ‹¤.</strong>
{: .notice}

# π“ Item 20 : μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ

## π«§ λ””ν΄νΈ λ©”μ„λ“

: μΈν„°νμ΄μ¤μ— μλ” κµ¬ν„ λ©”μ„λ“

### β¨ μ¶”μƒ λ©”μ„λ“μ™€μ μ°¨μ΄μ 

1. λ©”μ„λ“ μ•μ— default μμ•½μ–΄λ¥Ό λ¶™μΈλ‹¤.
2. κµ¬ν„λ¶€ {} κ°€ μμ–΄μ•Ό ν•λ‹¤.

### β¨ λ””ν΄νΈ λ©”μ„λ“ μμ‹
```java
public interface Interface {
   // μ¶”μƒ λ©”μ„λ“ 
    void abstractMethodA();
    void abstractMethodB();
    void abstractMethodC();

	// default λ©”μ„λ“
    default int defaultMethodA(){
    	...
    }
}
```

## β¨ λ‹¤μ¤‘ κµ¬ν„ λ©”μ»¤λ‹μ¦

μλ°”κ°€ μ κ³µν•λ” λ‹¤μ¤‘ κµ¬ν„ λ©”μ»¤λ‹μ¦μ—λ” μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤κ°€ μλ‹¤. μλ°” 8λ¶€ν„°λ” μΈν„°νμ΄μ¤λ„ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•  μ μκ² λμ–΄ λ‘λ‹¤ μΈμ¤ν„΄μ¤ λ©”μ„λ“λ¥Ό κµ¬ν„ ν•νƒλ΅ μ κ³µν•  μ μλ‹¤.

μ°¨μ΄μ μ€ μ¶”μƒ ν΄λμ¤κ°€ μ •μν• νƒ€μ…μ„ κµ¬ν„ν•λ” ν΄λμ¤λ” λ°λ“μ‹ μ¶”μƒ ν΄λμ¤μ ν•μ„ ν΄λμ¤κ°€ λμ–΄μ•Ό ν•λ‹¤λ” μ μ΄λ‹¤. λ°λ©΄ μΈν„°νμ΄μ¤λ” μΈν„°νμ΄μ¤κ°€ μ„ μ–Έν• λ©”μ„λ“λ¥Ό λ¨λ‘ μ •μν•κ³  κ·Έ μΌλ° κ·μ•½μ„ μ μ§€ν‚¨ ν΄λμ¤λΌλ©΄ μƒμ† μ—¬λ¶€, μΆ…λ¥μ— μƒκ΄€ μ—†μ΄ κ°™μ€ νƒ€μ…μΌλ΅ μ·¨κΈ‰λλ‹¤.

## π«§ μΈν„°νμ΄μ¤ μ¥μ 
1. λ³€κ²½μ΄ μ‰½λ‹¤
<br/> -> κΈ°μ΅΄ ν΄λμ¤μ—λ„ μ†μ‰½κ² μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ„£μ„ μ μλ‹¤. λ©”μ„λ“ κµ¬ν„ λ° implements κµ¬λ¬Έλ§ μ¶”κ°€ν•λ‹¤λ©΄ λ³„λ‹¤λ¥Έ λ³€κ²½ μ—†μ΄ μΈν„°νμ΄μ¤ κµ¬ν„μ΄ κ°€λ¥ν•λ‹¤.
<br/> ex) Comparable, Iterable, AutoCloseable
<br/> -> λ°λ©΄ μ¶”μƒ ν΄λμ¤λ” κΈ°μ΅΄ ν΄λμ¤ μ„μ— μ¶”κ°€ν•κΈ° μ–΄λ µλ‹¤.

2. λ―Ήμ¤μΈ (mixin) μ •μκ°€ κ°€λ¥ν•λ‹¤.
3. κ³„μΈµκµ¬μ΅°κ°€ μ—†λ” νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤.
<br/> -> ν”ν λ§ν•λ” μ΅°ν•© ν­λ° ν„μƒμ΄ μΌμ–΄λ‚μ§€ μ•λ”λ‹¤. κ³µν†µ κΈ°λ¥μ„ μ •μν•΄λ†“μ€ νƒ€μ…μ΄ μ—†μ–΄ λ§¤κ°λ³€μ νƒ€μ…λ§ λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ„ μμ—†μ΄ λ§μ΄ κ°€μ§„ κ±°λ€ν• ν΄λμ¤κ°€ μƒκΈΈ μ—Όλ ¤λ¥Ό ν•μ§€ μ•μ•„λ„ λλ‹¤.

<br/> cf) μΈν„°νμ΄μ¤ κ°„ μƒμ†λ„ κ°€λ¥ν•λ‹¤!


### β¨ λ―Ήμ¤μΈμ΄λ€?

: λ‹¤μ¤‘ μƒμ†μ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ€μ•μΌλ΅, κΈ°λ¥ λ‹¨μ„λ΅ λ¶„λ¦¬λ ν΄λμ¤λ¥Ό μƒμ„±ν• λ‹¤μ, ν•„μ”ν• ν΄λμ¤μ— Mixinμ„ μ μ©ν•μ—¬ κΈ°λ¥μ„ μ΅°ν•©ν•λ” λ°©μ‹
- ν΄λμ¤κ°€ μ•„λ‹λ©°, λ‹¨μν λ©”μ„λ“μ™€ μ†μ„±μ μ§‘ν•©μ΄λ‹¤.
- μ΄λ¬ν• Mixinλ“¤μ„ λ‹¤λ¥Έ ν΄λμ¤μ— μ μ©ν•μ—¬ κ·Έ ν΄λμ¤μ κΈ°λ¥μ„ ν™•μ¥ν•  μ μλ‹¤.

μλ¥Ό λ“¤λ©΄ Comparableμ€ μμ‹ μ„ κµ¬ν„ν• ν΄λμ¤λ“¤μ μΈμ¤ν„΄μ¤λ“¤λΌλ¦¬λ” μμ„λ¥Ό μ •ν•  μ μλ‹¤κ³  μ„ μ–Έν•λ” λ―Ήμ¤μΈ μΈν„°νμ΄μ¤μ ν• μλΌκ³  ν•  μ μλ‹¤.

## π«§ μΈν„°νμ΄μ¤ κµ¬ν„ μ£Όμμ‚¬ν•­

μΈν„°νμ΄μ¤μ λ©”μ„λ“λ” λ””ν΄νΈ λ©”μ„λ“λ΅ κµ¬ν„λ  μ μλ‹¤. μ£Όμμ‚¬ν•­μ€ λ‹¤μκ³Ό κ°™λ‹¤.

1. equalsμ™€ hashCodeμ™€ κ°™μ€ Objectμ λ©”μ„λ“λ” λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄μ„λ” μ• λλ‹¤.
2. μΈν„°νμ΄μ¤λ” μΈμ¤ν„΄μ¤ ν•„λ“λ¥Ό κ°€μ§ μ μ—†λ‹¤
3. publicμ΄ μ•„λ‹ μ •μ  λ©¤λ²„λ„ κ°€μ§ μ μ—†λ‹¤ (private μ •μ  λ©”μ„λ“ μμ™Έ)
4. μ§μ ‘ λ§λ“¤μ§€ μ•μ€ μΈν„°νμ΄μ¤μ—λ” λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μ—†λ‹¤.

μ¶”κ°€λ΅, μƒμ†ν•λ” μ‚¬λμ„ μ„ν•΄ @implSpec μλ°”λ… νƒκ·Έλ¥Ό λ¶™μ—¬ λ¬Έμ„ν™”ν•΄μ•Ό ν•λ” μ‚¬μ‹¤μ„ μμ§€ λ§μ.

## π«§ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤
- μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•λ” λ°©μ‹

κµ¬ν„ λ°©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.
1. μΈν„°νμ΄μ¤λ΅ νƒ€μ…μ„ μ •μ, ν•„μ”ν•λ‹¤λ©΄ λ””ν΄νΈ λ©”μ„λ“λ„ μ¶”κ°€ν•  κ²ƒ
κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” λ‚λ¨Έμ§€ λ©”μ„λ“λ“¤κΉμ§€ κµ¬ν„

λ‹¨μν κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•λ” κ²ƒλ§μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μκ² λλ‹¤. μ΄λ¥Ό ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄μ΄λΌκ³  ν•λ‹¤.

### β¨ ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄

ν…ν”λ¦Ώ λ©”μ„λ“(Template Method) ν¨ν„΄μ€ μ—¬λ¬ ν΄λμ¤μ—μ„ κ³µν†µμΌλ΅ μ‚¬μ©ν•λ” λ©”μ„λ“λ¥Ό ν…ν”λ¦Ών™” ν•μ—¬ μƒμ„ ν΄λμ¤μ—μ„ μ •μν•κ³ , ν•μ„ ν΄λμ¤λ§λ‹¤ μ„Έλ¶€ λ™μ‘ μ‚¬ν•­μ„ λ‹¤λ¥΄κ² κµ¬ν„ν•λ” ν¨ν„΄μ΄λ‹¤.

μ¦‰, λ³€ν•μ§€ μ•λ” κΈ°λ¥(ν…ν”λ¦Ώ)μ€ μƒμ„ ν΄λμ¤μ— λ§λ“¤μ–΄λ‘κ³  μμ£Ό λ³€κ²½λλ©° ν™•μ¥ν•  κΈ°λ¥μ€ ν•μ„ ν΄λμ¤μ—μ„ λ§λ“¤λ„λ΅ ν•μ—¬, μƒμ„μ λ©”μ†λ“ μ‹¤ν–‰ λ™μ‘ μμ„λ” κ³ μ •ν•λ©΄μ„ μ„Έλ¶€ μ‹¤ν–‰ λ‚΄μ©μ€ λ‹¤μ–‘ν™” λ  μ μλ” κ²½μ°μ— μ‚¬μ©λλ‹¤.

ν…ν”λ¦Ώ λ©”μ†λ“ ν¨ν„΄μ€ μƒμ†μ΄λΌλ” κΈ°μ μ„ κ·Ήλ€ν™”ν•μ—¬, μ•κ³ λ¦¬μ¦μ λΌλ€λ¥Ό λ§μ¶”λ” κ²ƒμ— μ΄μ μ„ λ‘”λ‹¤. μ΄λ―Έ μλ§μ€ ν”„λ μ„μ›ν¬μ—μ„ λ§μ€ λ¶€λ¶„μ— ν…ν”λ¦Ώ λ©”μ†λ“ ν¨ν„΄ μ½”λ“κ°€ μ°λ¦¬λ„ λ¨λ¥΄κ² μ μ©λμ–΄ μλ‹¤.

### β¨ κ³¨κ²© κµ¬ν„μ„ μ΄μ©ν• ν΄λμ¤ μ½”λ“ μμ‹

```java
static List<Integer> intArrayAsList(int[] a) {
  Objects.requireNonNull(a);

  // λ‹¤μ΄μ•„λ¬λ“ μ—°μ‚°μ μ‚¬μ©μ€ μλ°” 9λ¶€ν„° κ°€λ¥
  // <> == <Integer>
  return new AbstractList<>() {
    @Override public Integer get(int i) {
      return a[i]; // μ¤ν† λ°•μ‹±
    }

    @Override public Integer set(int i, Integer val) {
      int oldVal = a[i];
      a[i] = val; // μ¤ν† μ–Έλ°•μ‹±
      return oldVal; // μ¤ν† λ°•μ‹±
    }

    @Override public int size() {
      return a.length;
    }
  }
}
```

## π«§ μΈν„°νμ΄μ¤ κµ¬ν„

κµ¬μ΅°μƒ κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•μ§€ λ»ν•λ” μ²μ§€λΌλ©΄ μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„ν•΄μ•Ό ν•λ‹¤.

μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ—μ„ ν•΄λ‹Ή κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν• private λ‚΄λ¶€ ν΄λμ¤λ¥Ό μ •μν•κ³ , κ° λ©”μ„λ“ νΈμ¶μ„ λ‚΄λ¶€ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— μ „λ‹¬ν•λ©΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό μ°νμ μΌλ΅ μ΄μ©ν•  μλ„ μλ‹¤.

## π«§ κ³¨κ²© κµ¬ν„ μ‘μ„±
1. λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ κµ¬ν„μ— μ‚¬μ©λλ” κΈ°λ° λ©”μ„λ“ μ„ μ • (κ³¨κ²© κµ¬ν„μ—μ„ μ¶”μƒ λ©”μ„λ“κ°€ λ  μμ •)
2. κΈ°λ° λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•΄ μ§μ ‘ κµ¬ν„ν•  μ μλ” λ©”μ„λ“λ¥Ό λ¨λ‘ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µ (Objectμ λ©”μ„λ“ μ μ™Έ)
3. λ§μ•½ μΈν„°νμ΄μ¤μ λ©”μ„λ“κ°€ λ¨λ‘ κΈ°λ° λ©”μ„λ“μ™€ λ””ν΄νΈ λ©”μ„λ“κ°€ λλ‹¤λ©΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ³„λ„λ΅ λ§λ“¤ ν•„μ”λ” μ—†λ‹¤.
4. κ·Έλ ‡μ§€ μ•λ‹¤λ©΄ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄ λ‚¨μ€ λ©”μ„λ“λ“λ“¤μ„ μ‘μ„±ν•΄ λ„£λ”λ‹¤.
5. ν•„μ”μ‹ publicμ΄ μ•„λ‹ ν•„λ“μ™€ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ‹¤.

#### π’΅ Object λ©”μ„λ“λ” λ””ν΄νΈ λ©”μ„λ“μ— κµ¬ν„ν•΄μ„λ” μ• λλ―€λ΅ κ³¨κ²© κµ¬ν„ ν΄λμ¤μ— μ‘μ„±ν•μ

### β¨ κΈ°λ° λ©”μ„λ“

: κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°(OOP)μ—μ„ μƒμ†λ ν΄λμ¤κ°€ μ§μ ‘μ μΌλ΅ μƒμ†λ°›λ” λ©”μ„λ“
- μ£Όλ΅ λ¶€λ¨ ν΄λμ¤(λλ” κΈ°λ° ν΄λμ¤, μνΌ ν΄λμ¤)μ— μ •μλμ–΄ μμΌλ©°, μμ‹ ν΄λμ¤(λλ” νμƒ ν΄λμ¤)μ—μ„ κ·Έλ€λ΅ μ‚¬μ©ν•  μλ„ μκ³ , μ¤λ²„λΌμ΄λ”©(Overriding)μ„ ν†µν•΄ μ¬μ •μν•  μλ„ μλ‹¤.

### β¨ κ³¨κ²© κµ¬ν„ ν΄λμ¤ μ½”λ“ μμ‹

```java
public abstract class AbstractMapEntry<K, V> implements Map.Entry<K, V> {
  @Override public V setValue (V value) {
    throw new UnsupportedOperationException();
  }

  @Override public boolean equals (Object o) {
    if (o == this)
      return true;
    if (!(o instanceOf Map.Entry))
      return false;
    Map.Entry<?,?> e = (Map.Entry) o;
    return Objects.equals(e.getKey(). getKey()) && Objects.equals(e.getValue(), getValue());
  }

  @Override public int hashCode() {
    return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());
  }

  @Override public String toString() {
    return getKey() + "=" + getValue();
  }
}
```

## π«§ μ°Έκ³ μλ£
- [λ””ν΄νΈ λ©”μ„λ“](https://velog.io/@heoseungyeon/%EB%94%94%ED%8F%B4%ED%8A%B8-%EB%A9%94%EC%84%9C%EB%93%9CDefault-Method)
- [Mixinκ°€ λ¬΄μ—‡μΈκ°€μ”?](https://velog.io/@dev_seongjoo/Mixins%EA%B0%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94)
- [ν…ν”λ¦Ώ λ©”μ†λ“ ν¨ν„΄ μ λ€λ΅ λ°°μ›λ³΄μ](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%ED%85%9C%ED%94%8C%EB%A6%BF-%EB%A9%94%EC%86%8C%EB%93%9CTemplate-Method-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90)