---
title: "[Java] Item 89 : ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ë¥¼ í†µì œí•´ì•¼ í•œë‹¤ë©´ readResolveë³´ë‹¤ëŠ” ì—´ê±° íƒ€ì…ì„ ì‚¬ìš©í•˜ë¼"
categories:
  - Effective Java
tags:
toc: true
toc_sticky: true
date: 2025-08-15 17:27:00 +0900
---

<strong>Effective Javaë¥¼ ì½ê³  ì •ë¦¬í•œ ì •ë¦¬ë³¸ì…ë‹ˆë‹¤.</strong>
{: .notice}

# ğŸ“Œ Item 89 : ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ë¥¼ í†µì œí•´ì•¼ í•œë‹¤ë©´ readResolveë³´ë‹¤ëŠ” ì—´ê±° íƒ€ì…ì„ ì‚¬ìš©í•˜ë¼

ì‹±ê¸€í„´ì„ ì‚¬ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì˜¤ì§ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.

ê·¸ëŸ¬ë‚˜ í´ë˜ìŠ¤ì˜ ì„ ì–¸ì— `implements Serializable`ì„ ì¶”ê°€í•˜ëŠ” ìˆœê°„, ë³´ì´ì§€ ì•ŠëŠ” ìƒì„±ìë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆì–´ ì‹±ê¸€í„´ ë³´ì¥ì´ ê¹¨ì§€ê²Œ ëœë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ì„ ì±„íƒí•  ìˆ˜ ìˆë‹¤.

## ğŸ«§ ë°©ë²• 1 : readResolve() í™œìš©í•˜ê¸°

ë‹¤ìŒê³¼ ê°™ì€ í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ë©´, ì‹±ê¸€í„´ì´ ë³´ì¥ë˜ë¦¬ë¼ ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤.

```java
private Object readResolve() {
  return INSTANCE;
}
```

ì—­ì§ë ¬í™” í›„ ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ì´ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê³ , ì´ ë©”ì„œë“œê°€ ë°˜í™˜í•œ ê°ì²´ ì°¸ì¡°ê°€ ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ë¥¼ ëŒ€ì‹ í•´ ë°˜í™˜ëœë‹¤.

ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì´ë•Œ ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ì˜ ì°¸ì¡°ëŠ” ìœ ì§€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë°”ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ëœë‹¤.

## ğŸ«§ readResolve() ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

ë‹¤ë§Œ, readResolveë¥¼ ì¸ìŠ¤í„´ìŠ¤ í†µì œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë©´ ê°ì²´ ì°¸ì¡° íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ í•„ë“œëŠ” ëª¨ë‘ transientë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤.

ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì•„ì´í…œ 88ì—ì„œ ì‚´í´ë³¸ MutablePeriod ê³µê²©ê³¼ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ readResolve ë©”ì„œë“œê°€ ìˆ˜í–‰ë˜ê¸° ì „ì— ì—­ì§ë ¬í™”ëœ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê³µê²©í•  ì—¬ì§€ê°€ ë‚¨ëŠ”ë‹¤.

## ğŸ«§ readResolve() ë©”ì„œë“œê°€ ìˆ˜í–‰ë˜ê¸° ì „ ì—­ì§ë ¬í™”ëœ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê³µê²©í•˜ëŠ” ë²•

ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

> ì‹±ê¸€í„´ì´ transientê°€ ì•„ë‹Œ ì°¸ì¡° í•„ë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´, ê·¸ í•„ë“œì˜ ë‚´ìš©ì€ readResolve ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ì—­ì§ë ¬í™”ë˜ëŠ”ë°, ì´ë•Œ í•´ë‹¹ ì°¸ì¡° í•„ë“œì˜ ë‚´ìš©ì´ ì—­ì§ë ¬í™”ë˜ëŠ” ì‹œì ì— ê·¸ ì—­ì§ë ¬í™”ëœ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ë¥¼ í›”ì³ì˜¬ ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ì½”ë“œë¥¼ ì‚´í´ë³´ì.


### âœ¨ transientê°€ ì•„ë‹Œ ì°¸ì¡° í•„ë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” ì‹±ê¸€í„´ í´ë˜ìŠ¤

```java
public class Elvis implements Serializable {
  public static final Elvis INSTANCE = new Elvis();
  private Elvis() { }
  private String[] favoriteSongs = { "Hound Dog", "Heartbreak Hotel" };

  public void printFavorites() {
    System.out.println(Arrays.toString(favoriteSongs));
  }

  private Object readResolve() {
    return INSTANCE;
  }
}
```


### âœ¨ ë„ë‘‘ í´ë˜ìŠ¤

```java
public class ElvisStealer implements Serializable {
  static Elvis impersonator;
  private Elvis payload;

  private Object readResole() {
    // resolveë˜ê¸° ì „ì˜ Elvis ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡° ì €ì¥
    imersonator = payload;

    // favoriteSongs í•„ë“œì— ë§ëŠ” íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜
    return new String[] { "A Fool Such as I" };
  }

  private static final long serialVersionUID = 0;
}
```

### âœ¨ ì‹¤í–‰ ì½”ë“œ
```java
// ... (ì¤‘ëµ)
public static void main(String[] args) {
  // ElvisStealer.impersonatorë¥¼ ì´ˆê¸°í™”í•œ ë‹¤ìŒ,
  // ì§„ì§œ Elvis(Elvis.INSTANCE)ë¥¼ ë°˜í™˜í•œë‹¤.
  Elvis elvis = (Elvis) deserialize(serializedForm);
  Elvis impersonator = ElvisStealer.impersonator;

  elvis.printFavorites();
  impersonator.printFavorites();
}
```

ì´ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ì¶œë ¥ë  ê²ƒì´ë‹¤.

[Hound Dog, Heartbreak Hotel]
<br/>[A Fool Such as I]

ì™œ ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°œì˜ Elvis ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì—ˆì„ê¹Œ?

### âœ¨ ê³µê²© ë°©ë²•

readResolve ë©”ì„œë“œì™€ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œ í•˜ë‚˜ë¥¼ í¬í•¨í•œ `ë„ë‘‘` í´ë˜ìŠ¤ê°€ ìˆë‹¤.

ì´ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë„ë‘‘ì´ `ìˆ¨ê¸¸` ì§ë ¬í™”ëœ ì‹±ê¸€í„´ì„ ì°¸ì¡°í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

ì§ë ¬í™”ëœ ìŠ¤íŠ¸ë¦¼ì—ì„œ ì‹±ê¸€í„´ì˜ ë¹„íœ˜ë°œì„± í•„ë“œ (ì—¬ê¸°ì„œëŠ” favoriteSongs)ë¥¼ ì´ ë„ë‘‘ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ êµì²´í•œë‹¤.

ì´ì œ ì‹±ê¸€í„´ì€ ë„ë‘‘ì„ ì°¸ì¡°í•˜ê³  ë„ë‘‘ì€ ì‹±ê¸€í„´ì„ ì°¸ì¡°í•˜ëŠ” ìˆœí™˜ ê³ ë¦¬ê°€ ë§Œë“¤ì–´ì¡Œë‹¤.

ì‹±ê¸€í„´ì´ ë„ë‘‘ì„ í¬í•¨í•˜ë¯€ë¡œ ì‹±ê¸€í„´ì´ ì—­ì§ë ¬í™”ë  ë•Œ ë„ë‘‘ì˜ readResolve ë©”ì„œë“œê°€ ë¨¼ì € í˜¸ì¶œëœë‹¤.

ê·¸ ê²°ê³¼, ë„ë‘‘ì˜ readResolve ë©”ì„œë“œê°€ ìˆ˜í–‰ë  ë•Œ ë„ë‘‘ì˜ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œì—ëŠ” ì—­ì§ë ¬í™” ë„ì¤‘ì¸ (ê·¸ë¦¬ê³  readResolveê°€ ìˆ˜í–‰ë˜ê¸° ì „ì¸) ì‹±ê¸€í„´ì˜ ì°¸ì¡°ê°€ ë‹´ê²¨ ìˆê²Œ ëœë‹¤.

## ğŸ«§ ë°©ë²• 2 : ì—´ê±° íƒ€ì… í™œìš©í•˜ê¸°

ê¸°ì¡´ ì½”ë“œì—ì„œ ë¬¸ì œê°€ ë˜ì—ˆë˜ favoriteSongs í•„ë“œë¥¼ transientë¡œ ì„ ì–¸í•˜ì—¬ ì´ ë¬¸ì œë¥¼ ê³ ì¹  ìˆ˜ ìˆì§€ë§Œ Elvisë¥¼ ì›ì†Œ í•˜ë‚˜ì§œë¦¬ ì—´ê±° íƒ€ì…ìœ¼ë¡œ ë°”ê¿” ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ë„ ìˆë‹¤.

ì§ë ¬í™” ê°€ëŠ¥í•œ ì¸ìŠ¤í„´ìŠ¤ í†µì œ í´ë˜ìŠ¤ë¥¼ ì—´ê±° íƒ€ì…ì„ ì´ìš©í•´ êµ¬í˜„í•˜ë©´ ì„ ì–¸í•œ ìƒìˆ˜ ì™¸ì˜ ë‹¤ë¥¸ ê°ì²´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŒì„ ìë°”ê°€ ë³´ì¥í•´ì¤€ë‹¤.

```java
public enum Elvis {
  INSTANCE;

  private String[] favoirteSongs = { "Hound Dog", "Heartbreak Hotel" };

  public void printFavorites() {
    System.out.println(Arrays.toString(favoriteSongs));
  }
}
```